

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Utils &mdash; Backend Chat 1.0.2 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=e59714d7" />

  
      <script src="_static/jquery.js?v=5d32c60e"></script>
      <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="_static/documentation_options.js?v=1ed6394b"></script>
      <script src="_static/doctools.js?v=9bcbadda"></script>
      <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Configuration" href="back_chat.configuration.html" />
    <link rel="prev" title="Services" href="back_chat.services.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            Backend Chat
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="back_chat.html">back_chat package</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="back_chat.html#module-back_chat">Module contents</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="back_chat.html#subpackages">Subpackages</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="back_chat.descriptors.html">Descriptors</a></li>
<li class="toctree-l3"><a class="reference internal" href="back_chat.exceptions.html">Exceptions</a></li>
<li class="toctree-l3"><a class="reference internal" href="back_chat.middleware.html">Middleware</a></li>
<li class="toctree-l3"><a class="reference internal" href="back_chat.models.html">Models</a></li>
<li class="toctree-l3"><a class="reference internal" href="back_chat.routes.html">Routes</a></li>
<li class="toctree-l3"><a class="reference internal" href="back_chat.services.html">Services</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Utils</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#module-back_chat.utils">Module contents</a></li>
<li class="toctree-l4"><a class="reference internal" href="#submodules">Submodules</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-back_chat.utils.functions">Functions module</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-back_chat.utils.logger_api">Logger_api module</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="back_chat.html#submodules">Submodules</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Backend Chat</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="back_chat.html">back_chat package</a></li>
      <li class="breadcrumb-item active">Utils</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/back_chat.utils.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="utils">
<h1>Utils<a class="headerlink" href="#utils" title="Link to this heading"></a></h1>
<section id="module-back_chat.utils">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-back_chat.utils" title="Link to this heading"></a></h2>
<p>This package provides utility functions and helper modules that support common
or reusable tasks across the project.</p>
</section>
<section id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Link to this heading"></a></h2>
</section>
<section id="module-back_chat.utils.functions">
<span id="functions-module"></span><h2>Functions module<a class="headerlink" href="#module-back_chat.utils.functions" title="Link to this heading"></a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="back_chat.utils.functions.add_user">
<span class="sig-prename descclassname"><span class="pre">back_chat.utils.functions.</span></span><span class="sig-name descname"><span class="pre">add_user</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">user_</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="back_chat.models.html#back_chat.models.schemas.UserSchema" title="back_chat.models.schemas.UserSchema"><span class="pre">UserSchema</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">str</span></span></span><a class="reference internal" href="_modules/back_chat/utils/functions.html#add_user"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#back_chat.utils.functions.add_user" title="Link to this definition"></a></dt>
<dd><p>This function adds a user to the database. It first checks if the user’s
city is unknown and attempts to fetch it using an external API.
If the user does not already exist in the database,
it creates a new user entry; otherwise, it returns a message
indicating the user already exists.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>user</strong> – An instance of UserSchema containing user details such as
name, postal_code, and city.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A string message indicating whether the user was added to the
database or already exists.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="back_chat.utils.functions.save_file">
<em class="property"><span class="k"><span class="pre">async</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">back_chat.utils.functions.</span></span><span class="sig-name descname"><span class="pre">save_file</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">UploadFile</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/back_chat/utils/functions.html#save_file"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#back_chat.utils.functions.save_file" title="Link to this definition"></a></dt>
<dd><p>Asynchronously saves an uploaded file to disk in chunks and notifies
connected clients.</p>
<p>The file is saved in the <cite>SAVE_FOLDER</cite> directory, and any spaces in the
filename are replaced with hyphens. The file is written in append-binary
mode in case it is uploaded in chunks. After saving, a broadcast message is
sent to all connected WebSocket clients to notify them of the new file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>file</strong> – The uploaded file to be saved (FastAPI’s <cite>UploadFile</cite>).</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="back_chat.utils.functions.update_user">
<span class="sig-prename descclassname"><span class="pre">back_chat.utils.functions.</span></span><span class="sig-name descname"><span class="pre">update_user</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">user_</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="back_chat.models.html#back_chat.models.orm.ApiUser" title="back_chat.models.orm.ApiUser"><span class="pre">ApiUser</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">user_update</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="back_chat.models.html#back_chat.models.schemas.UserSchema" title="back_chat.models.schemas.UserSchema"><span class="pre">UserSchema</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="back_chat.models.html#back_chat.models.orm.ApiUser" title="back_chat.models.orm.ApiUser"><span class="pre">ApiUser</span></a></span></span><a class="reference internal" href="_modules/back_chat/utils/functions.html#update_user"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#back_chat.utils.functions.update_user" title="Link to this definition"></a></dt>
<dd><p>This function updates an existing ApiUser instance with new data provided
in a UserSchema instance and returns the updated ApiUser</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>user</strong> – An instance of ApiUser representing the user to be updated.</p></li>
<li><p><strong>user_update</strong> – An instance of UserSchema containing the new data
for the user.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>An updated ApiUser instance with the new data applied.</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-back_chat.utils.logger_api">
<span id="logger-api-module"></span><h2>Logger_api module<a class="headerlink" href="#module-back_chat.utils.logger_api" title="Link to this heading"></a></h2>
<p>Custom logging module with colored console output and rotating file logging.</p>
<p>This module defines a custom logger (<cite>LoggerApi</cite>) that logs messages to both
the console (with colored output for different log levels) and to daily rotating
log files. It is useful for debugging and monitoring asynchronous applications.</p>
<p>Classes:
- ColoredFormatter: Applies color formatting to log messages based on log level.
- LoggerApi: Custom logger class with console and file handlers.</p>
<dl class="py class">
<dt class="sig sig-object py" id="back_chat.utils.logger_api.ColoredFormatter">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">back_chat.utils.logger_api.</span></span><span class="sig-name descname"><span class="pre">ColoredFormatter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fmt</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">datefmt</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">style</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'%'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">validate</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="keyword-only-separator o"><abbr title="Keyword-only parameters separator (PEP 3102)"><span class="pre">*</span></abbr></span></em>, <em class="sig-param"><span class="n"><span class="pre">defaults</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/back_chat/utils/logger_api.html#ColoredFormatter"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#back_chat.utils.logger_api.ColoredFormatter" title="Link to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">Formatter</span></code></p>
<p>Custom log formatter that adds color to log levels for console output.</p>
<dl class="py method">
<dt class="sig sig-object py" id="back_chat.utils.logger_api.ColoredFormatter.format">
<span class="sig-name descname"><span class="pre">format</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">record</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">LogRecord</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">str</span></span></span><a class="reference internal" href="_modules/back_chat/utils/logger_api.html#ColoredFormatter.format"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#back_chat.utils.logger_api.ColoredFormatter.format" title="Link to this definition"></a></dt>
<dd><p>Format the log message with color based on the log level.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>record</strong> – The log record to format.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The color-formatted log message as a string.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="back_chat.utils.logger_api.LoggerApi">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">back_chat.utils.logger_api.</span></span><span class="sig-name descname"><span class="pre">LoggerApi</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">level</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">10</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/back_chat/utils/logger_api.html#LoggerApi"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#back_chat.utils.logger_api.LoggerApi" title="Link to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">Logger</span></code></p>
<p>Custom logger that logs to both console (with color) and rotating log
files.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> – Name of the logger (used as log file name as well).</p></li>
<li><p><strong>level</strong> – Logging level (default: DEBUG).</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="back_chat.services.html" class="btn btn-neutral float-left" title="Services" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="back_chat.configuration.html" class="btn btn-neutral float-right" title="Configuration" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, agrubio.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>